Version 4
SHEET 1 880 680
WIRE 288 -176 240 -176
WIRE -224 -128 -528 -128
WIRE 64 -128 -224 -128
WIRE 64 -80 64 -128
WIRE 144 -80 64 -80
WIRE -224 -48 -320 -48
WIRE -112 -48 -224 -48
WIRE 144 -48 144 -80
WIRE -320 -32 -320 -48
WIRE -112 -32 -112 -48
WIRE 64 -32 64 -80
WIRE 240 -16 240 -176
WIRE 208 16 176 16
WIRE 320 16 272 16
WIRE 176 32 176 16
WIRE 176 32 144 32
WIRE 208 32 176 32
WIRE 320 32 320 16
WIRE 320 32 272 32
WIRE -528 64 -528 -48
WIRE -464 64 -528 64
WIRE -320 64 -320 48
WIRE -320 64 -384 64
WIRE 320 64 320 32
WIRE -320 80 -320 64
WIRE -192 96 -208 96
WIRE -112 96 -112 48
WIRE -112 96 -192 96
WIRE 224 96 224 64
WIRE 224 96 160 96
WIRE 256 96 256 64
WIRE 320 96 256 96
WIRE -112 112 -112 96
WIRE -336 128 -384 128
WIRE -208 128 -208 96
WIRE -208 128 -240 128
WIRE -384 176 -384 128
WIRE -384 176 -544 176
WIRE 160 176 -64 176
WIRE 160 176 160 96
WIRE 208 176 160 176
WIRE 320 176 320 96
WIRE 320 176 288 176
WIRE 400 176 320 176
WIRE 512 176 480 176
WIRE 608 176 592 176
WIRE 704 176 608 176
WIRE 704 192 704 176
WIRE -544 240 -544 176
WIRE 160 288 160 176
WIRE 352 288 160 288
WIRE 608 288 608 176
WIRE 608 288 416 288
WIRE -160 304 -160 176
WIRE 704 320 704 272
FLAG -160 304 0
FLAG 704 320 0
FLAG 320 64 0
FLAG 64 -32 0
FLAG 288 -176 Signal
IOPIN 288 -176 Out
FLAG -544 240 0
FLAG -192 96 Base
IOPIN -192 96 Out
FLAG -320 80 Gate
IOPIN -320 80 In
SYMBOL res 304 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 0.004
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL res 496 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.5
SYMBOL ind 496 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 100m
SYMBOL schottky 352 304 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RB085BM-40
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 704 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 16.8
SYMBOL voltage 144 48 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL npn -64 112 R90
SYMATTR InstName Q1
SYMATTR Value 2STBN15D100
SYMATTR Prefix X
SYMBOL voltage -528 -32 R180
WINDOW 123 0 0 Left 0
WINDOW 39 24 -12 Left 2
SYMATTR InstName V3
SYMATTR Value PWL(0 3.3 +1n 0 +42m 0 +1n 3.3 +10m 3.3 +1n 0 +2.8m 0 +1n 3.3 +10m 3.3 +1n 0 +2.8m 0 +1n 3.3 +10m 3.3 +1n 0 +2.8m 0 +1n 3.3 +10m 3.3 +1n 0 +2.8m 0 +1n 3.3)
SYMBOL OpAmp 240 32 R0
SYMATTR InstName U2
SYMATTR Prefix X
SYMATTR Value INA240A3
SYMBOL res -96 64 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 91
SYMBOL voltage -224 -32 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3.3
SYMBOL nmos -240 80 R90
SYMATTR InstName M1
SYMATTR Value RK7002BM
SYMBOL res -336 -48 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -368 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
TEXT 392 -104 Left 2 !.include ina240a3.lib
TEXT 392 -64 Left 2 !.include 2STBN15D100.lib
TEXT -416 344 Left 2 !;op 20
TEXT -440 296 Left 2 !.tran 1
TEXT 392 -24 Left 2 !.include rk7002bm.lib
